<!DOCTYPE html>
<html>
  <head>
  <title>pRED Data Commons omics APIs</title>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css"
    >
    <style>
      body, html {
        padding: 30px 0;
        margin-left: 24px;
        width: 960px;
      }
      .pictures {
        display: flex;
        margin-bottom: 32px;
      }
      .picture {
        height: 420px;
        box-sizing: border-box;
        image-rendering: -webkit-optimize-contrast;
      }
      .picture.first {
        margin-right: 40px;
      }
      .picture.second {
        outline: 1px solid rgba(199, 202, 209, 1);
      }
    </style>
  </head>
  <body>
  <style>
    .underline-header {
      text-decoration: underline;
    }
  </style>

  <section>
    <h1>Omics data in pRED Data Commons</h1>
    <p>
      In pRED the omics HDAP and integration layers are implemented within Genestack.
      These pages describe programmatic access to Genestack via RESTful APIs.
    </p>
  </section>

  
  <section>
    <h4>How data is organised in Genestack</h4>
    <p>
      Genestack is organised into studies, samples and processed (experiment-derived/signal) data
      for those samples. Curator endpoints allow dedicated curator users to edit and link data.
      User endpoints allow data query/retrieval.
    </p>
    <div class="pictures">
      <img
        class="picture first"
        alt="Data model"
        src="//bio-test-data.s3.amazonaws.com/odm/Images/data_model.png"
      />
      <img
        class="picture second"
        alt="Metainfo editor"
        src="//bio-test-data.s3.amazonaws.com/odm/Images/metainfo_editor.png"
      />
    </div>
  </section>

  <section>
    <h4 class="underline-header">
      User query/retrieval tasks
    </h4>
    <p>
      These user endpoints allow all users to make omics queries.
    </p>

    
    <section>
      <h5>Integration layer</h5>
      <ul>
        <li>
          <a href="/swagger/?urls.primaryName=integrationUser">integrationUser</a> -
          API endpoints for conducting multi-omics queries. Use this to find and retrieve study, sample and processed (signal) data and metadata for a given query
        </li>
      </ul>
    </section>

    
    <section>
      <h5>HDAPs</h5>
      <ul>
            <li>
              <a href="/swagger/?urls.primaryName=studyUser">studyUser</a> -
              API endpoints for retrieving only study metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=sampleUser">sampleUser</a> -
              API endpoints for retrieving only sample metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=libraryUser">libraryUser</a> -
              API endpoints for retrieving only library metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=preparationUser">preparationUser</a> -
              API endpoints for retrieving only preparation metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=expressionUser">expressionUser</a> -
              API endpoints for retrieving only expression data or metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=variantUser">variantUser</a> -
              API endpoints for retrieving only variant data or metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=flowCytometryUser">flowCytometryUser</a> -
              API endpoints for retrieving only flow cytometry data or metadata
            </li>
      </ul>
    </section>
  </section>

  <section>
    <h4 class="underline-header">
      Curation tasks
    </h4>
    <p>
      These curator endpoints are only meant for a dedicated group of data curators.
    </p>

    <section>
      <h5>
        Integration layer
      </h5>
      <ul>
            <li>
              <a href="/swagger/?urls.primaryName=integrationCurator">integrationCurator</a> -
              API endpoints to link experimental data/metadata to samples, and samples to studies
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=arvados-importer">arvados-importer</a> -
              API for importing projects from Arvados
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=tasks">tasks</a> -
              API endpoints to work with asynchronous tasks
            </li>
      </ul>
    </section>

    <section>
      <h5>
        HDAPs
      </h5>
      <ul>
            <li>
              <a href="/swagger/?urls.primaryName=studyCurator">studyCurator</a> -
              API endpoints to add, delete and update studies and study metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=sampleCurator">sampleCurator</a> -
              API endpoints to add, delete and update samples and sample metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=libraryCurator">libraryCurator</a> -
              API endpoints to add, delete and update libraries and library metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=preparationCurator">preparationCurator</a> -
              API endpoints to add, delete and update preparations and preparation metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=expressionCurator">expressionCurator</a> -
              API endpoints to add, delete and update expression data and metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=variantCurator">variantCurator</a> -
              API endpoints to add, delete and update variant data and metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=flowCytometryCurator">flowCytometryCurator</a> -
              API endpoints to add, delete and update flow cytometry data and metadata
            </li>
            <li>
              <a href="/swagger/?urls.primaryName=job">job</a> -
              Experimental API endpoints to run asynchronous jobs (import large datasets, e.t.c)
            </li>
      </ul>
    </section>
  </section>

  <section>
    <h5>
      Data sources
    </h5>
    <ul>
      <li>
        <a href="/swagger/?urls.primaryName=reference-data">reference-data</a> -
        Experimental API endpoints to create, delete, update and query cross-reference entries
      </li>
    </ul>
  </section>

  
  <section>
    <h4>API Tokens</h4>
    <p>
      All API usage (including via the above example scripts) requires authentication.
      You can use either Access token from an identity provider, e.g. Azure AD, or
      <a
        href="https://odm-user-guide.readthedocs.io/en/development/doc-odm-user-guide/getting-a-genestack-api-token.html"
        target="_blank"
        rel="noopener noreferrer"
      >Genestack API token.</a>
      To specify the Access token use the “Authorization” header, to specify the Genestack API token use the “Genestack-Api-Token” header.</p>
      <p>Note: access token takes precedence, meaning that if both tokens are supplied, the access token will be used for processing the request.</p>
  </section>
  </body>
</html>