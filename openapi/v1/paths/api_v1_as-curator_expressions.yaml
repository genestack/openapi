get:
  description: >+
    Retrieve all expression data and metadata objects that match a query.


    ## Metadata full-text queries

    Single words can be supplied as is, otherwise use speech marks (`"`) to
    quote queries that include whitespace. Speech marks and backslash characters
    in the query need to be escaped with a backslash (`\`).


    ## Metadata filters

    Metadata filters are key-value pairs joined by an operator. The `=` operator
    matches literal values/string. The `!=` operator matches anything except the
    literal value/string. The `<` or `>` operators match numerical results that
    are less or greater than the supplied value. Strings containing whitespace
    need to be quoted with (`"`).


    ## Combinations

    Metadata queries/filters for the same parameter can be combined with `&&`,
    `AND`, `||` and `OR` operators, using white-space to separate out the terms
    and operators. Parentheses `( )` can be used for complex expressions.


    ## Versioning

    Specific versions of omics data files (eg. GCT) can be queried via the
    useVersions parameter. Different versions of an omics data file are
    associated via their CHAIN_ID metadata value. This CHAIN_ID can be supplied
    to the useVersions parameter along with the version number or specific omics
    data file accessions to include them in the query. If nothing is supplied to
    the useVersions parameter then only the active version (which is usually the
    last one imported) is queried. This acts as a filter before the rest of the
    query is carried out.


    Example usage:

    useVersions=* (query all versions, including those without CHAIN_IDs)

    useVersions=v2 (query the second version. If there is no second version then
    the data file is not queried)

    useVersions=v1,v0 (query the first version and any data files without
    CHAIN_IDs(v0) )

    useVersions=GSVC002:v3 (for omics data files with a CHAIN_ID of GSCV002
    query the third version)

    useVersions=GSVC002:GSF00494,GSF000496 (for omics data files with a CHAIN_ID
    of GSCV002 query only the specific accessions GSF00494 and GSF000496)


    Rules for multiple CHAIN_IDs can be supplied to the parameter using the ;
    separator.


    ## Paging

    For performance reasons this endpoint returns results in "pages" of limited
    size together with a `cursor` tag. To retrieve the next page of results
    please supply this `cursor` tag to resume the query from your previous
    result and get the next page. If there are no more results you will just
    retrieve an empty result.

  operationId: getExpressionDataAsCurator
  parameters:
    - description: |-
        Allows to get an extended or updated response body. Available values:
         `term_id` - returns extended information including IDs for values and dictionaries;
         `multi_values` - returns data with several feature attributes and several sample measurements in the response body in case the original data had them. If not specified, returns only the first feature identifier and the first measurement per sample from the original data.
      explode: true
      in: query
      name: responseFormat
      schema:
        items:
          type: string
        type: array
      style: form
    - description: >-
        Filter by expression metadata (key-value metadata pair(s)). E.g.
        `"Normalization Method"=TPM`. Retrieving individual runs via "Run Source
        ID"="HG00096"  will be deprecated after June 2023
      in: query
      name: filter
      schema:
        type: string
    - description: >-
        Search for expression objects via a full text query over all expression
        metadata. E.g. `TPM`. Queries matching dictionary terms are
        automatically expanded to include synonyms.
      in: query
      name: query
      schema:
        type: string
    - description: >-
        If the full-text query term is present in an ODM dictionary, enabling
        this parameter will modify the query to include child terms of the
        full-text query.


        For example, the search query "Body fluid" can be expanded to include
        the term "Blood" (a child term of  "Body fluid") so files containing
        either "Body fluid" or  "Blood"  in their metadata will be returned in
        the search results.


        The parent-child relationship is defined by the key "broaders" or
        "subClassOf" in the dictionary.


        If the full query term is not present in a dictionary then this
        parameter has no effect.
      in: query
      name: searchSpecificTerms
      schema:
        type: boolean
    - description: >-
        Genestack accession that corresponds to the gct column used to link
        expression data from the same run to a sample.
      in: query
      name: runFilter
      schema:
        type: string
    - description: Minimum threshold (inclusive) for returned expression values.
      in: query
      name: minExpressionLevel
      schema:
        format: double
        type: number
    - description: >-
        List of features to return. These features must match exactly the probe
        IDs in the GCT file. Example: `1552269_at`
      explode: true
      in: query
      name: featureList
      schema:
        items:
          type: string
        type: array
      style: form
    - description: >-
        Specify which versions of omics data files are used in the query. By
        default the active version is used. See Versioning above. Syntax:


        \* or `v<version number>` or `<CHAIN_ID>`:`v<version number>` or
        `<CHAIN_ID>`:`<accession1,accession2,..>`
      in: query
      name: useVersions
      schema:
        type: string
    - description: >-
        The parameter defines amount of metadata attributes to return:


        1. `minimal_data` - return metadata attributes according to the default
        template.

        2. `extended_data_included` - return metadata attributes according to
        applied template, if object doesnâ€™t have applied template, default
        template will be used. This is the default for User endpoints.

        3. `original_data_included` - return all metadata attributes with values
        and null attributes, if they are present in the applied template. This
        is the default for Curator endpoints.
      in: query
      name: returnedMetadataFields
      schema:
        enum:
          - minimal_data
          - extended_data_included
          - original_data_included
        type: string
    - description: >-
        Maximum number of results to return per page (see Paging above). This
        value must be between 0 and 2000 (inclusive). The default is 2000.
      in: query
      name: pageLimit
      schema:
        format: int32
        type: integer
    - description: The page tag to resume results from (see paging above).
      in: query
      name: cursor
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ExpressionResponse.yaml
      description: Retrieved Expression data.
    '400':
      content: {}
      description: Expression data cannot be retrieved.
    '401':
      content: {}
      description: >-
        User is not authenticated. Please supply a valid Access Token in the
        `Authorization` HTTP header (e.g. Authorization: bearer [token])
         or  Genestack API token in the `Genestack-API-Token` header (this token may be obtained from the Genestack UI _Profile_ page).
    '404':
      content: {}
      description: No object exists with the given ID.
    '500':
      content: {}
      description: >-
        An internal server error occurred. This indicates an unexpected failure
        in the Genestack system, please file a bug report to
        support@genestack.com, including the error details.
  security:
    - Access-token: []
    - Genestack-API-Token: []
  summary: Retrieve multiple expression data and metadata objects
  tags:
    - Expression SPoT as Curator
